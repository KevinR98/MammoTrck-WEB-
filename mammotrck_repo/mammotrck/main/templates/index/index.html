{% load static %}
{% load auth_extras %}

<!doctype html>
<html is="dmx-app">

<head>
    <script src="{% static 'index/frontend/dmxAppConnect/dmxAppConnect.js'  %}"></script>
    <meta charset="UTF-8">
    <title>MammoTrck</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="{% static 'index/frontend/bootstrap/4/css/bootstrap.min.css'  %}" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="{% static 'index/frontend/dmxAppConnect/dmxBootstrap4Navigation/dmxBootstrap4Navigation.js'  %}" defer=""></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/css/materialize.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700">
    <link rel="stylesheet" href="{% static 'index/frontend/css/table.css'  %}" />
    <link rel="stylesheet" href="{% static 'index/frontend/css/report_box.css'  %}" />
    <link rel="stylesheet" href="{% static 'index/frontend/css/style.css'  %}" />
    <link rel="stylesheet" href="{% static 'index/frontend/css/dropzone.css'  %}" />
    <link rel="stylesheet" href="{% static 'index/frontend/css/upload.css'  %}" />
    <link rel="stylesheet" href="{% static 'index/frontend/css/timeline.css'  %}" />


    <script src="https://cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/js/materialize.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.3.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="{% static 'index/frontend/js/dropzone.js'  %}"></script>


    <script src="{% static 'index/frontend/dmxAppConnect/dmxBootstrap4Collapse/dmxBootstrap4Collapse.js'  %}" defer=""></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/summernote/dist/summernote-lite.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/summernote/dist/summernote-lite.min.js"></script>
    <script src="{% static 'index/frontend/dmxAppConnect/dmxSummernote/dmxSummernote.js'  %}" defer=""></script>
    <script src="{% static 'index/frontend/dmxAppConnect/dmxTyped/dmxTyped.js'  %}" defer=""></script>
    <script src="{% static 'index/frontend/dmxAppConnect/dmxTyped/typed.min.js'  %}" defer=""></script>
    <script src="{% static 'index/frontend/dmxAppConnect/dmxRouting/dmxRouting.js'  %}" defer=""></script>
    <script src="{% static 'index/frontend/dmxAppConnect/dmxDataTraversal/dmxDataTraversal.js'  %}" defer=""></script>


    <style>
      .modal{
         all: unset;
         position: fixed;
         top: 0;
         left: 0;
         z-index: 1050;
         display: none;
         width: 100%;
         height: 100%;
         overflow: hidden;
         outline: 0;
         background-color: rgba(1,1,1,0.5);

       }

       .fade{
         transition: opacity .15s linear;
       }
       .modal-dialog{
         width: 645px !important;
         max-width: 645px !important;
       }
       .modal-content{
         border-radius: 20px;
         width: auto !important;
         padding-bottom: 0px !important;
       }
       .modal-footer{
         background-color: #fff !important;
       }

       .modal-body{
         -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
                box-sizing: border-box;
       }


    </style>

</head>

<body id="MammoTrck" class="style32" style="width: 100vw; height: 100vh; margin: 0 auto;">
    <div style="width: 100%; height: 100%;">
        <div class="row style36 justify-content-xl-start row-cols-xl-7" style="margin-bottom: 0px;">
            <div class="col-12 col-md-4 col-lg-3 style35 col-xl align-self-xl-stretch offset-xl-0 w-auto border-right border-dark col-xl-2">
                <div class="contentArea style40">
                    <section class="style80" style="padding-top:20px">
                      <p id="nombre_usuario" class="style37"><b>Correo: {{username}}</b></p>
                      <p id="id_usuario" class="style39" style="margin-top: 4px">Id de usuario: {{user_id}}</p>
                      <p id="fecha_hoy"><b class="style54">Fecha de hoy: {{current_date}}</b></p>
                    </section>
                    <section class="style84" style="padding-top: 27px; padding-bottom: 0px; height:325px">

                        {% if user|has_group:"admin" %}

                            <div class="row">

                                <i class="material-icons style56" >star</i><a href="/admin/auth/user" class="btn newbutton active" style="all: unset; cursor: pointer; margin-top:5px; "><label style="cursor:pointer; color:#212529; font-size:14px">Manejo de Usuarios</label></a>

                            </div>


                        {% endif %}

                        <div class="row" id="nav_pacientes" hidden>

                            <i class="material-icons style56" >star</i><button  class="btn newbutton active" onclick="load_pacientes();" style="all: unset; cursor: pointer; margin-top:5px; " data-toggle="button"><label style="cursor:pointer; color:#212529; font-size:14px">Pacientes</label></button>

                        </div>

                        <div class="row" id="nav_formularios" hidden>

                            <i class="material-icons style56" >star</i><button  class="btn newbutton active" onclick="nav_formularios();" style="all: unset; cursor: pointer; margin-top:5px; " data-toggle="button"><label style="cursor:pointer; color:#212529; font-size:14px">Formularios</label></button>

                        </div>

                        <div class="row" id="nav_reportes" hidden>

                            <i class="material-icons style56" >star</i><button  class="btn newbutton active" onclick="nav_reportes();" style="all: unset; cursor: pointer; margin-top:5px; " data-toggle="button"><label style="cursor:pointer; color:#212529; font-size:14px">Reportes</label></button>

                        </div>



                        <div class="row" id="nav_timeline" hidden>

                            <i class="material-icons style56" >star</i><button  class="btn newbutton active" onclick="nav_timeline();" style="all: unset; cursor: pointer; margin-top:5px; " data-toggle="button"><label style="cursor:pointer; color:#212529; font-size:14px">Línea de Tiempo</label></button>

                        </div>
                    </section>
                    <section class="style81" style="padding-bottom:0px;">
                        <div class="d-block p-4 bg-transparent style42">
                            <img src="{% static 'index/frontend/assets/images/logo_1.png'  %}" class="style41">
                        </div>
                        <section class="style83">
                            <div class="row">
                                <i class="material-icons style56">info</i><button id="boton_informacion" class="btn newbutton active" style="all: unset; cursor: pointer; font-size:1rem" data-toggle="modal" data-target="#modal_info">Información</button>
                            </div>
                             <form action="{% url 'logout' %}">
                                <div class="row">
                                    <i class="material-icons style56">logout</i> <button id="boton_logout" class="btn newbutton active" type="submit" style="all: unset; cursor: pointer; font-size:1rem" data-toggle="button">Cerrar sesión</button>
                                </div>
                             </form>
                        </section>
                    </section>
                </div>
            </div>




              <div class="col-md-8 col-lg-9 col-12 offset-0 bg-light style52 col-xl-10 style8" >
                <div class="modal fade" id="modal_upload" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true" data-backdrop="false">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">

                      <div class="modal-body" >

                        <form action="{% url 'save_images' %}" method="post"  class="dropzone" id="drop">
                          {% csrf_token %}
                          <div class="dz-message needsclick">
                            <i class="fa fa-picture-o fa-5x" aria-hidden="true"></i><br> <br>
                            <span class="note needsclick" style="font-size: 1rem">Presione acá o arrastre los archivos a cargar</span>
                          </div>
                          <input type="hidden" value="" id="drop_form_id" name="drop_form_id">
                        </form>

                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary style108" data-dismiss="modal" style="margin-right: 5px; background-color: grey" onclick="Dropzone.forElement('#drop').removeAllFiles(true)">Volver</button>
                      </div>
                    </div>

                  </div>
                </div>

                <div class="modal fade" id="modal_upload_csv" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true" data-backdrop="false">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">

                      <div class="modal-body" >

                        <form action="{% url 'import_form' %}" method="post"  class="dropzone" id="csv">
                          {% csrf_token %}
                          <div class="dz-message needsclick">
                            <i class="fa fa-file-o fa-5x" aria-hidden="true"></i><br> <br>
                            <span class="note needsclick" style="font-size: 1rem">Presione acá o arrastre los archivos a cargar</span>
                          </div>
                          <input type="hidden" value="" id="drop_patient_id" name="drop_patient_id">
                        </form>

                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary style108" data-dismiss="modal" style="margin-right: 5px; background-color: grey" onclick="Dropzone.forElement('#csv').removeAllFiles(true)">Volver</button>
                      </div>
                    </div>

                  </div>
                </div>

                <div class="modal fade" id="modal_info" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true" data-backdrop="false">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Acerca de Nosotros...</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body" >
                        <p class="info">La plataforma MammoTrck ha sido desarrollada por Kevin Rojas y Diego Murillo, estudiantes de la carrera de Ingeniería en Computación, y diseñada por Ileana Brenes Mora, estudiante de la carrera de Ingeniería en Diseño Industrial, ambas del Instituto Tecnológico de Costa Rica. </p>

                        <p class="info">El proyecto fue desarrollado bajo el marco del curso "Proyecto de Ingeniería de Software".</p>

                        <p class="info">El proyecto se desarrolló con los objetivos principales de apoyar el esfuerzo de profesionales médicos en el diagnóstico de pacientes de mamografía, e impulsar la digitalización de procesos clínicos en las instituciones médicas del país.</p>

                        <p class="info">El desarrollo del mismo fue hecho posible gracias al programa <a href="https://www.tec.ac.cr/programa-investigacion/escience">E-Science</a>, al <a href="https://www.tec.ac.cr/">Instituto Tecnológico de Costa Rica</a> y al <a href="https://www.tec.ac.cr/grupo-investigacion/parma">grupo PARMA de investigación</a>.</p>


                        <div  style="display: flex; justify-content: center;">
                            <img src="{% static 'index/assets/images/logo-tec.png'  %}" alt="logo tec" width="300" height="150">

                        </div>

                        <div  style="display: flex; justify-content: center;">

                            <img src="{% static 'index/assets/images/logo-escience.png'  %}" alt="logo escience" width="100" height="100">
                            <img src="{% static 'index/assets/images/PARMA_logo.png'  %}" alt="logo parma" width="150" height="100">
                        </div>
                      </div>
                      <div class="modal-footer" >

                      </div>
                    </div>

                  </div>
                </div>

                <div class="modal fade" id="modal_filtros_0" tabindex="-1" role="dialog" aria-labelledby="ModalLabelmodal_filtros_0" aria-hidden="true" data-backdrop="false">
                  <div class="modal-dialog " role="document">
                    <div class="modal-content">
                      <div class="modal-header" style="flex-direction:column;">
                        <h5 class="modal-title" >Edición de Filtros en Historia Personal</h5>

                        <h6 class="card-subtitle text-muted" style="margin-top:10px">Seleccione los filtros para los campos del formulario que desee que se muestren</h6>
                      </div>

                      <div id="filtros_historia_personal" class="modal-body" >
                        <label id="camposA_id_values" type="hidden" value="" style="all: unset;" />

                        <div class="row">

                          <div class="col" style="padding: 0px;">

                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_hospital" onclick="setFilterA(this)" id="filterA0"><label class="form-check-label style70" for="filterA0" style="font-size: 0.8rem !important; padding-left: 25px;">hospital</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_nombre" onclick="setFilterA(this)" id="filterA1"><label class="form-check-label style70" for="filterA1" style="font-size: 0.8rem !important; padding-left: 25px;">nombre</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_cedula" onclick="setFilterA(this)" id="filterA2"><label class="form-check-label style70" for="filterA2" style="font-size: 0.8rem !important; padding-left: 25px;">cédula</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_fecha_nacimiento" onclick="setFilterA(this)" id="filterA3"><label class="form-check-label style70" for="filterA3" style="font-size: 0.8rem !important; padding-left: 25px;">fecha nacimiento</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_nacionalidad" onclick="setFilterA(this)" id="filterA4"><label class="form-check-label style70" for="filterA4" style="font-size: 0.8rem !important; padding-left: 25px;">nacionalidad</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_etnia" onclick="setFilterA(this)" id="filterA5"><label class="form-check-label style70" for="filterA5" style="font-size: 0.8rem !important; padding-left: 25px;">etnia</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_otra_identidad" onclick="setFilterA(this)" id="filterA6"><label class="form-check-label style70" for="filterA6" style="font-size: 0.8rem !important; padding-left: 25px;">otra identidad</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_peso" onclick="setFilterA(this)" id="filterA7"><label class="form-check-label style70" for="filterA7" style="font-size: 0.8rem !important; padding-left: 25px;">peso</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_talla" onclick="setFilterA(this)" id="filterA8"><label class="form-check-label style70" for="filterA8" style="font-size: 0.8rem !important; padding-left: 25px;">talla</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_imc" onclick="setFilterA(this)" id="filterA9"><label class="form-check-label style70" for="filterA9" style="font-size: 0.8rem !important; padding-left: 25px;">imc</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_fumador" onclick="setFilterA(this)" id="filterA10"><label class="form-check-label style70" for="filterA10" style="font-size: 0.8rem !important; padding-left: 25px;">fumador</label></div>
                          </div>

                          <div class="col" style="padding: 0px;">

                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_inicio_fumado" onclick="setFilterA(this)" id="filterA11"><label class="form-check-label style70" for="filterA11" style="font-size: 0.8rem !important; padding-left: 25px;">inicio fumado</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_fuma" onclick="setFilterA(this)" id="filterA12"><label class="form-check-label style70" for="filterA12" style="font-size: 0.8rem !important; padding-left: 25px;">fuma</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_tiempo_fumado" onclick="setFilterA(this)" id="filterA13"><label class="form-check-label style70" for="filterA13" style="font-size: 0.8rem !important; padding-left: 25px;">tiempo fumado</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_bebe" onclick="setFilterA(this)" id="filterA14"><label class="form-check-label style70" for="filterA14" style="font-size: 0.8rem !important; padding-left: 25px;">bebe</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_frecuencia_bebe" onclick="setFilterA(this)" id="filterA15"><label class="form-check-label style70" for="filterA15" style="font-size: 0.8rem !important; padding-left: 25px;">frecuencia bebe</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_otra_frecuencia" onclick="setFilterA(this)" id="filterA16"><label class="form-check-label style70" for="filterA16" style="font-size: 0.8rem !important; padding-left: 25px;">otra frecuencia</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_actividad_fisica" onclick="setFilterA(this)" id="filterA17"><label class="form-check-label style70" for="filterA17" style="font-size: 0.8rem !important; padding-left: 25px;">actividad física</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_frecuencia_actividad_fisica" onclick="setFilterA(this)" id="filterA18"><label class="form-check-label style70" for="filterA18" style="font-size: 0.8rem !important; padding-left: 25px;">frec. actividad física</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_consume_grasa" onclick="setFilterA(this)" id="filterA19"><label class="form-check-label style70" for="filterA19" style="font-size: 0.8rem !important; padding-left: 25px;">consume grasa</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_consume_vegetales" onclick="setFilterA(this)" id="filterA20"><label class="form-check-label style70" for="filterA20" style="font-size: 0.8rem !important; padding-left: 25px;">consume vegetales</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_diabetes" onclick="setFilterA(this)" id="filterA21"><label class="form-check-label style70" for="filterA21" style="font-size: 0.8rem !important; padding-left: 25px;">diabetes</label></div>
                          </div>

                          <div class="col" style="padding: 0px;">
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_toma_tamoxifeno" onclick="setFilterA(this)" id="filterA22"><label class="form-check-label style70" for="filterA22" style="font-size: 0.8rem !important; padding-left: 25px;">toma tamoxifeno</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_cuanto_tamoxifeno" onclick="setFilterA(this)" id="filterA23"><label class="form-check-label style70" for="filterA23" style="font-size: 0.8rem !important; padding-left: 25px;">cant. tamoxifeno</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_toma_anastrozol" onclick="setFilterA(this)" id="filterA24"><label class="form-check-label style70" for="filterA24" style="font-size: 0.8rem !important; padding-left: 25px;">toma anastrozol</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_cuanto_anastrozol" onclick="setFilterA(this)" id="filterA25"><label class="form-check-label style70" for="filterA25" style="font-size: 0.8rem !important; padding-left: 25px;">cant. anastrozol</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_toma_metformina" onclick="setFilterA(this)" id="filterA26"><label class="form-check-label style70" for="filterA26" style="font-size: 0.8rem !important; padding-left: 25px;">toma metformina</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_cuanto_metformina" onclick="setFilterA(this)" id="filterA27"><label class="form-check-label style70" for="filterA27" style="font-size: 0.8rem !important; padding-left: 25px;">cant. metformina</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_toma_bifosfonatos" onclick="setFilterA(this)" id="filterA28"><label class="form-check-label style70" for="filterA28" style="font-size: 0.8rem !important; padding-left: 25px;">toma bifosfonatos</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_cuanto_bifosfonatos" onclick="setFilterA(this)" id="filterA29"><label class="form-check-label style70" for="filterA29" style="font-size: 0.8rem !important; padding-left: 25px;">cant. bifosfonatos</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_toma_aspirina" onclick="setFilterA(this)" id="filterA30"><label class="form-check-label style70" for="filterA30" style="font-size: 0.8rem !important; padding-left: 25px;">toma aspirina</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_cuanto_aspirina" onclick="setFilterA(this)" id="filterA31"><label class="form-check-label style70" for="filterA31" style="font-size: 0.8rem !important; padding-left: 25px;">cant. aspirina</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="p_radiacion" onclick="setFilterA(this)" id="filterA32"><label class="form-check-label style70" for="filterA32" style="font-size: 0.8rem !important; padding-left: 25px;">radiación</label></div>
                          </div>
                      </div>

                      </div>
                      <div class="modal-footer">
                        <button type="button"  class="btn btn-secondary style108" data-dismiss="modal" style="margin-right: 5px; background-color: grey">Volver</button>

                      </div>
                    </div>
                  </div>
              </div>

              <div class="modal fade" id="modal_filtros_1" tabindex="-1" role="dialog" aria-labelledby="ModalLabelmodal_filtros_1" aria-hidden="true" data-backdrop="false">
                <div class="modal-dialog " role="document">
                  <div class="modal-content">
                    <div class="modal-header" style="flex-direction:column;">
                      <h5 class="modal-title" >Edición de Filtros en Antecedentes Gineco-Obstétricos</h5>

                      <h6 class="card-subtitle text-muted" style="margin-top:10px">Seleccione los filtros para los campos del formulario que desee que se muestren</h6>
                    </div>

                    <div id="filtros_antecendentes" class="modal-body" >
                      <label id="camposB_id_values" type="hidden" value="" style="all: unset;" />

                      <div class="row">

                        <div class="col" style="padding: 0px;">
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_primera_menstruacion" onclick="setFilterB(this)" id="filterB0"><label class="form-check-label style70" for="filterB0" style="font-size: 0.8rem !important; padding-left: 25px;">primera menstruación</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_menopausia" onclick="setFilterB(this)" id="filterB1"><label class="form-check-label style70" for="filterB1" style="font-size: 0.8rem !important; padding-left: 25px;">menopausia</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_edad_menopausia" onclick="setFilterB(this)" id="filterB2"><label class="form-check-label style70" for="filterB2" style="font-size: 0.8rem !important; padding-left: 25px;">edad menopausia</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_cantidad_partos" onclick="setFilterB(this)" id="filterB3"><label class="form-check-label style70" for="filterB3" style="font-size: 0.8rem !important; padding-left: 25px;">cantidad partos</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_edad_ultimo_hijo" onclick="setFilterB(this)" id="filterB4"><label class="form-check-label style70" for="filterB4" style="font-size: 0.8rem !important; padding-left: 25px;">edad último hijo</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_tiempo_lactancia" onclick="setFilterB(this)" id="filterB5"><label class="form-check-label style70" for="filterB5" style="font-size: 0.8rem !important; padding-left: 25px;">tiempo lactancia</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_lactancia" onclick="setFilterB(this)" id="filterB6"><label class="form-check-label style70" for="filterB6" style="font-size: 0.8rem !important; padding-left: 25px;">lactancia</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_anticonceptivos" onclick="setFilterB(this)" id="filterB7"><label class="form-check-label style70" for="filterB7" style="font-size: 0.8rem !important; padding-left: 25px;">anticonceptivos</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_tiempo_anticonceptivos" onclick="setFilterB(this)" id="filterB8"><label class="form-check-label style70" for="filterB8" style="font-size: 0.8rem !important; padding-left: 25px;">tiempo anticonceptivos</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_ultimo_uso_anticonceptivos" onclick="setFilterB(this)" id="filterB9"><label class="form-check-label style70" for="filterB9" style="font-size: 0.8rem !important; padding-left: 25px;">último uso anticonceptivos</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_terapia_hormonal" onclick="setFilterB(this)" id="filterB10"><label class="form-check-label style70" for="filterB10" style="font-size: 0.8rem !important; padding-left: 25px;">terapia hormonal</label></div>

                        </div>

                        <div class="col" style="padding: 0px;">
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_tipo_terapia" onclick="setFilterB(this)" id="filterB11"><label class="form-check-label style70" for="filterB11" style="font-size: 0.8rem !important; padding-left: 25px;">tipo terapia</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_tiempo_terapia" onclick="setFilterB(this)" id="filterB12"><label class="form-check-label style70" for="filterB12" style="font-size: 0.8rem !important; padding-left: 25px;">tiempo terapia</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_biopsias" onclick="setFilterB(this)" id="filterB13"><label class="form-check-label style70" for="filterB13" style="font-size: 0.8rem !important; padding-left: 25px;">biopsias</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_numero_biopsias" onclick="setFilterB(this)" id="filterB14"><label class="form-check-label style70" for="filterB14" style="font-size: 0.8rem !important; padding-left: 25px;">número biopsias</label></div>
                          <div class="form-check"><input class="form-check-input" type="checkbox" value="p_resultado_biopsias" onclick="setFilterB(this)" id="filterB15"><label class="form-check-label style70" for="filterB15" style="font-size: 0.8rem !important; padding-left: 25px;">resultado biopsias</label></div>

                        </div>


                    </div>

                    </div>
                    <div class="modal-footer">
                      <button type="button"  class="btn btn-secondary style108" data-dismiss="modal" style="margin-right: 5px; background-color: grey">Volver</button>

                    </div>
                  </div>
                </div>
            </div>

            <div class="modal fade" id="modal_filtros_2" tabindex="-1" role="dialog" aria-labelledby="ModalLabelmodal_filtros_2" aria-hidden="true" data-backdrop="false">
              <div class="modal-dialog " role="document">
                <div class="modal-content">
                  <div class="modal-header" style="flex-direction:column;">
                    <h5 class="modal-title" >Edición de Filtros en Histora Familiar</h5>

                    <h6 class="card-subtitle text-muted" style="margin-top:10px">Seleccione los filtros para los campos del formulario que desee que se muestren</h6>
                  </div>

                  <div id="filtros_historia_familiar" class="modal-body" >
                    <label id="camposC_id_values" type="hidden" value="" style="all: unset;" />

                    <div class="row">

                      <div class="col" style="padding: 0px;">
                        <div class="form-check"><input class="form-check-input" type="checkbox" value="p_pruebas_geneticas" onclick="setFilterC(this)" id="filterC0"><label class="form-check-label style70" for="filterC0" style="font-size: 0.8rem !important; padding-left: 25px;">pruebas genéticas</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" value="p_resultados_pruebas" onclick="setFilterC(this)" id="filterC1"><label class="form-check-label style70" for="filterC1" style="font-size: 0.8rem !important; padding-left: 25px;">resultados de pruebas</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" value="p_otro_resultado" onclick="setFilterC(this)" id="filterC2"><label class="form-check-label style70" for="filterC2" style="font-size: 0.8rem !important; padding-left: 25px;">otro resultado</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" value="p_familiares_con_cancer_mama" onclick="setFilterC(this)" id="filterC3"><label class="form-check-label style70" for="filterC3" style="font-size: 0.8rem !important; padding-left: 25px;">familiares con cáncer de mama</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" value="p_parentescos" onclick="setFilterC(this)" id="filterC4"><label class="form-check-label style70" for="filterC4" style="font-size: 0.8rem !important; padding-left: 25px;">parentescos</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" value="p_familiares_con_otros_canceres" onclick="setFilterC(this)" id="filterC5"><label class="form-check-label style70" for="filterC5" style="font-size: 0.8rem !important; padding-left: 25px;">familiares con otros cánceres</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" value="p_tipos_de_cancer" onclick="setFilterC(this)" id="filterC6"><label class="form-check-label style70" for="filterC6" style="font-size: 0.8rem !important; padding-left: 25px;">tipos de cancer</label></div>
                        <div class="form-check"><input class="form-check-input" type="checkbox" value="p_otros_parentescos" onclick="setFilterC(this)" id="filterC7"><label class="form-check-label style70" for="filterC7" style="font-size: 0.8rem !important; padding-left: 25px;">otros parentescos</label></div>
                      </div>




                  </div>

                  </div>
                  <div class="modal-footer">
                    <button type="button"  class="btn btn-secondary style108" data-dismiss="modal" style="margin-right: 5px; background-color: grey">Volver</button>

                  </div>
                </div>
              </div>
          </div>


                <div id="content_loader" class="d-flex flex-column" style=" height : 100%">







                </div>

                <div class="row">
                  {% if user|has_group:"admin" or user|has_group:"medico" %}

                    <div id="live-chat" style="box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">

                      <header class="clearfix">



                          <h4>ESCRIBIR REPORTE CLÍNICO</h4>



                      </header>

                      <div class="chat">

                          <div class="chat-history d-flex">

                              <form id='form_report' action="{%url 'create_report'%}" method="post" class="style110">
                                {% csrf_token %}
                                  <div class="form-group">
                                      <label for="inp_form" style="font-size: 13px">Formulario Asociado</label>
                                      {{reporte_form.formulario}}
                                  </div>
                                  <fieldset class="style111">
                                      {{reporte_form.contenido}}
                                      <button id="boton_agregar_reporte" class="btn text-xl-right  style108 boton_a"  onclick="submit_form_report()">Agregar Reporte</button>

                                  </fieldset>

                              </form>



                          </div> <!-- end chat-history -->





                      </div> <!-- end chat -->

                   </div> <!-- end live-chat -->

                  {% endif %}

                </div>
            </div>
        </div>
    </div>
    <script src="{% static 'index/assets/js/load.js'  %}"></script>
    <script src="{% static 'index/frontend/js/report_box.js'  %}"></script>
    <script src="{% static 'index/frontend/bootstrap/4/js/popper.min.js'  %}"></script>
    <script src="{% static 'index/frontend/bootstrap/4/js/bootstrap.min.js'  %}"></script>

    <script>

      Dropzone.options.drop = {

          success: function(file, response) {
            load_images($('#formulario_id_value').attr("value"));

          },
          accept: function(file, done) {
            valid = ["application/dicom","image/png"];

            if (!valid.includes(file.type)) {
                done("Tipo de archivo no soportado");
            }
            else { done(); }
        }
      }

      Dropzone.options.csv = {

          success: function(file, response) {
            load_formularios($('#patient_id_value').attr("value"));
            alert('Formulario cargado')
          },
          accept: function(file, done) {
            valid = ["csv"];
            extention = file.name.split('.').pop();

            if (!valid.includes(extention)) {
                done("Tipo de archivo no soportado");
            }
            else { done(); }
          }
      }

    </script>
</body>



</html>





<!--
    License

    Copyright (c) 2020 by Marcmatias (https://codepen.io/marcmatias/pen/gxPzvY)

    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


    Copyright (c) 2020 by Mehmet mert (https://codepen.io/mehmetmert/pen/zbKpv)

    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


    Copyright (c) 2020 by Daniel (https://codepen.io/iiCe89/pen/GZVjBp)

    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


    Copyright (c) 2020 by Jones  Joseph (https://codepen.io/jo_Geek/pen/NLoGZZ)

    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

-->
